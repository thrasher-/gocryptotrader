---
description: Daily report on recent repository activity delivered as an issue.
on:
  schedule:
    - cron: "0 9 * * 1-5"
  workflow_dispatch:

permissions:
  contents: read
  actions: read
  issues: read
  pull-requests: read

tools:
  github:
    toolsets:
      - default
      - actions
      - issues
      - pull_requests

safe-outputs:
  create-issue:
    title-prefix: "[Daily Report] "
    labels: [report, automation]
    max: 1
    expires: false
    close-older-issues: true

---

# Daily Repository Activity Report

Generate a comprehensive daily report on recent repository activity and create an issue with the findings.

## Overview

You are tasked with creating a daily activity report for this repository. The report should cover the **last 24 hours** of activity and be delivered as a GitHub issue. Focus on meaningful activity that helps maintainers understand what's happening in the repository.

## Report Scope

Collect and analyze activity from the past 24 hours in the following areas:

### 1. Pull Requests
- **New PRs opened**: List title, author, and a brief description
- **PRs merged**: List title, who merged it, and any notable changes
- **PRs updated**: Significant updates to existing PRs (new commits, major discussions)
- **PR reviews**: Notable review activity (approvals, requested changes)

### 2. Issues
- **New issues opened**: List title, author, and brief description
- **Issues closed**: List title and resolution context if available
- **Issue activity**: Issues with significant comments or updates
- **Issue labels**: Notable labeling or triage activity

### 3. Commits
- **Commit activity on main/master branch**: Count and list notable commits
- **Top contributors**: Who made the most commits in the last 24 hours
- **Key changes**: Identify any significant changes (large files, important modules)

### 4. GitHub Actions
- **Workflow runs**: Summary of workflow execution (successes, failures)
- **Failed workflows**: Highlight any critical failures that need attention
- **Action trends**: Are workflows running more frequently? Any patterns?

### 5. Community Activity
- **New contributors**: Any first-time contributors
- **Discussions**: Notable discussion activity (if applicable)
- **Stars and forks**: Changes in repository popularity

## Report Format

Create the issue with the following structure:

### Title
Format: `Repository Activity Report - [Date]`

Example: `Repository Activity Report - February 18, 2026`

### Body

Use this structure for the issue body:

```markdown
# üìä Daily Repository Activity Report
**Period**: [Date/Time Range]
**Generated**: [Timestamp]

---

## üöÄ Pull Requests

### Opened (X)
- **[#PR_NUMBER] PR Title** by @author
  - Brief description or key points
  - Link: [View PR](#)

### Merged (X)
- **[#PR_NUMBER] PR Title** by @author (merged by @merger)
  - Brief description of changes
  - Link: [View PR](#)

### Notable Activity
- Significant PR discussions or reviews

---

## üêõ Issues

### Opened (X)
- **[#ISSUE_NUMBER] Issue Title** by @author
  - Brief description
  - Link: [View Issue](#)

### Closed (X)
- **[#ISSUE_NUMBER] Issue Title** by @author
  - Resolution summary
  - Link: [View Issue](#)

### Active Discussions
- Issues with significant comment activity

---

## üíª Commits

### Summary
- **Total commits**: X
- **Top contributor**: @username (X commits)
- **Branches**: activity across branches

### Notable Commits
- **[SHORT_SHA]** Brief commit message by @author
  - Key changes or impact

---

## ‚öôÔ∏è GitHub Actions

### Workflow Summary
- **Total runs**: X
- **Success rate**: X%
- **Failed workflows**: X

### Action Items
- List any critical failures requiring attention
- Link to failed workflow runs

---

## üë• Community

### New Contributors
- @username - First contribution! [PR/Issue link]

### Repository Stats
- **Stars**: [change if significant]
- **Forks**: [change if significant]

---

## üìù Summary

Provide a brief 2-3 sentence summary of the day's activity:
- What was the main focus of development?
- Were there any notable achievements or milestones?
- Any areas requiring attention?

---

**Note**: This report is automatically generated by the Daily Activity Report workflow. For questions or to adjust the report format, see [workflow configuration](.github/workflows/daily-activity-report.md).
```

## Special Instructions

1. **Emphasize Human Activity**: When reporting on bot activity (GitHub Actions, Copilot, etc.), always attribute it to the humans who triggered or reviewed it. For example, "The team used Copilot to..." not "Copilot created...".

2. **Filter Noise**: Focus on meaningful activity. Skip:
   - Dependabot PRs unless merged
   - Spam or duplicate issues
   - Bot-only commits without human context

3. **Deduplication**: 
   - Check if a report for today already exists before creating a new one
   - Use the issue title pattern to search: `is:issue is:open "[Daily Report] Repository Activity Report"`
   - If a report exists, do NOT create another one

4. **No Activity Handling**:
   - If there's no meaningful activity in the last 24 hours, still create a brief report noting the quiet period
   - Example: "No significant activity in the last 24 hours. The repository had a quiet day."

5. **Link Everything**: Ensure all PRs, issues, commits, and workflow runs are properly linked using their URLs or GitHub markdown references.

6. **Time Zone**: Use UTC for all timestamps and date ranges for consistency.

## Output Format

Always output JSON with your action:

```json
{
  "type": "create_issue",
  "title": "Repository Activity Report - February 18, 2026",
  "body": "[Full formatted report in markdown]",
  "labels": ["report", "automation"]
}
```

Or if no new report needed:

```json
{
  "type": "noop",
  "message": "Daily report already exists for today"
}
```
